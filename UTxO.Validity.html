<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO.Validity</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Function.html" class="Module">Function</a> <a id="22" class="Keyword">using</a> <a id="28" class="Symbol">(</a><a id="29" href="Function.Base.html#992" class="Function Operator">_∘_</a><a id="32" class="Symbol">)</a>

<a id="35" class="Keyword">open</a> <a id="40" class="Keyword">import</a> <a id="47" href="Data.Bool.html" class="Module">Data.Bool</a>     <a id="61" class="Keyword">using</a> <a id="67" class="Symbol">(</a><a id="68" href="Data.Bool.Base.html#1451" class="Function">T</a><a id="69" class="Symbol">)</a>
<a id="71" class="Keyword">open</a> <a id="76" class="Keyword">import</a> <a id="83" href="Data.Product.html" class="Module">Data.Product</a>  <a id="97" class="Keyword">using</a> <a id="103" class="Symbol">(</a><a id="104" href="Data.Product.html#1788" class="Function">∃-syntax</a><a id="112" class="Symbol">)</a>
<a id="114" class="Keyword">open</a> <a id="119" class="Keyword">import</a> <a id="126" href="Data.Nat.html" class="Module">Data.Nat</a>      <a id="140" class="Keyword">using</a> <a id="146" class="Symbol">(</a><a id="147" href="Data.Nat.Base.html#1047" class="Function Operator">_&lt;_</a><a id="150" class="Symbol">)</a>
  <a id="154" class="Keyword">renaming</a> <a id="163" class="Symbol">(</a><a id="164" href="Data.Nat.Properties.html#2239" class="Function Operator">_≟_</a> <a id="168" class="Symbol">to</a> <a id="171" href="Data.Nat.Properties.html#2239" class="Function Operator">_≟ℕ_</a><a id="175" class="Symbol">)</a>
<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Data.List.html" class="Module">Data.List</a>     <a id="203" class="Keyword">using</a> <a id="209" class="Symbol">(</a><a id="210" href="Data.List.Base.html#8989" class="InductiveConstructor">[]</a><a id="212" class="Symbol">;</a> <a id="214" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">_∷_</a><a id="217" class="Symbol">;</a> <a id="219" href="Data.List.Base.html#4183" class="Function">length</a><a id="225" class="Symbol">;</a> <a id="227" href="Data.List.Base.html#1383" class="Function">map</a><a id="230" class="Symbol">;</a> <a id="232" href="Data.List.Base.html#7308" class="Function">filter</a><a id="238" class="Symbol">)</a>


<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a>            <a id="300" class="Keyword">using</a> <a id="306" class="Symbol">(</a><a id="307" href="Data.List.Membership.Setoid.html#877" class="Function Operator">_∈_</a><a id="310" class="Symbol">;</a> <a id="312" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWith∈</a><a id="320" class="Symbol">)</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Data.List.Relation.Unary.Unique.Propositional.html" class="Module">Data.List.Relation.Unary.Unique.Propositional</a> <a id="380" class="Keyword">using</a> <a id="386" class="Symbol">(</a><a id="387" href="Data.List.Relation.Unary.AllPairs.Core.html#946" class="Datatype">Unique</a><a id="393" class="Symbol">)</a>
<a id="395" class="Keyword">open</a> <a id="400" class="Keyword">import</a> <a id="407" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>                  <a id="453" class="Keyword">using</a> <a id="459" class="Symbol">(</a><a id="460" href="Data.List.Relation.Unary.Any.html#1101" class="Datatype">Any</a><a id="463" class="Symbol">)</a>

<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Relation.Binary.html" class="Module">Relation.Binary</a>                       <a id="516" class="Keyword">using</a> <a id="522" class="Symbol">(</a><a id="523" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a><a id="532" class="Symbol">)</a>
<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="584" class="Keyword">using</a> <a id="590" class="Symbol">(</a><a id="591" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="594" class="Symbol">;</a> <a id="596" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="600" class="Symbol">)</a>

<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="UTxO.Hashing.Base.html" class="Module">UTxO.Hashing.Base</a>
<a id="633" class="Keyword">open</a> <a id="638" class="Keyword">import</a> <a id="645" href="UTxO.Hashing.Types.html" class="Module">UTxO.Hashing.Types</a>
<a id="664" class="Keyword">open</a> <a id="669" class="Keyword">import</a> <a id="676" href="UTxO.Hashing.MetaHash.html" class="Module">UTxO.Hashing.MetaHash</a> <a id="698" class="Keyword">using</a> <a id="704" class="Symbol">(</a><a id="705" href="UTxO.Hashing.MetaHash.html#1197" class="Postulate Operator">_♯</a><a id="707" class="Symbol">)</a>
<a id="709" class="Keyword">open</a> <a id="714" class="Keyword">import</a> <a id="721" href="UTxO.Types.html" class="Module">UTxO.Types</a>

<a id="733" class="Keyword">module</a> <a id="740" href="UTxO.Validity.html" class="Module">UTxO.Validity</a>
  <a id="756" class="Symbol">(</a><a id="757" href="UTxO.Validity.html#757" class="Bound">Address</a> <a id="765" class="Symbol">:</a> <a id="767" class="PrimitiveType">Set</a><a id="770" class="Symbol">)</a>
  <a id="774" class="Symbol">(</a><a id="775" href="UTxO.Validity.html#775" class="Bound Operator">_♯ₐ</a> <a id="779" class="Symbol">:</a> <a id="781" href="UTxO.Hashing.Base.html#618" class="Function">Hash</a> <a id="786" href="UTxO.Validity.html#757" class="Bound">Address</a><a id="793" class="Symbol">)</a>
  <a id="797" class="Symbol">(</a><a id="798" href="UTxO.Validity.html#798" class="Bound Operator">_≟ₐ_</a> <a id="803" class="Symbol">:</a> <a id="805" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="815" class="Symbol">{</a><a id="816" class="Argument">A</a> <a id="818" class="Symbol">=</a> <a id="820" href="UTxO.Validity.html#757" class="Bound">Address</a><a id="827" class="Symbol">}</a> <a id="829" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="832" class="Symbol">)</a>
  <a id="836" class="Keyword">where</a>

<a id="843" class="Keyword">open</a> <a id="848" class="Keyword">import</a> <a id="855" href="UTxO.Ledger.html" class="Module">UTxO.Ledger</a>      <a id="872" href="UTxO.Validity.html#757" class="Bound">Address</a> <a id="880" href="UTxO.Validity.html#775" class="Bound Operator">_♯ₐ</a> <a id="884" href="UTxO.Validity.html#798" class="Bound Operator">_≟ₐ_</a>
<a id="889" class="Keyword">open</a> <a id="894" class="Keyword">import</a> <a id="901" href="UTxO.Hashing.Tx.html" class="Module">UTxO.Hashing.Tx</a>  <a id="918" href="UTxO.Validity.html#757" class="Bound">Address</a> <a id="926" href="UTxO.Validity.html#775" class="Bound Operator">_♯ₐ</a> <a id="930" href="UTxO.Validity.html#798" class="Bound Operator">_≟ₐ_</a>
<a id="935" class="Keyword">open</a> <a id="940" class="Keyword">import</a> <a id="947" href="UTxO.TxUtilities.html" class="Module">UTxO.TxUtilities</a> <a id="964" href="UTxO.Validity.html#757" class="Bound">Address</a> <a id="972" href="UTxO.Validity.html#775" class="Bound Operator">_♯ₐ</a> <a id="976" href="UTxO.Validity.html#798" class="Bound Operator">_≟ₐ_</a>

<a id="982" class="Keyword">open</a> <a id="987" class="Keyword">import</a> <a id="994" href="Data.List.html" class="Module">Data.List</a> <a id="1004" class="Keyword">using</a> <a id="1010" class="Symbol">(</a><a id="1011" href="Agda.Builtin.List.html#121" class="Datatype">List</a><a id="1015" class="Symbol">)</a>

<a id="1018" class="Keyword">record</a> <a id="IsValidTx"></a><a id="1025" href="UTxO.Validity.html#1025" class="Record">IsValidTx</a> <a id="1035" class="Symbol">(</a><a id="1036" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="1039" class="Symbol">:</a> <a id="1041" href="UTxO.Ledger.html#768" class="Record">Tx</a><a id="1043" class="Symbol">)</a> <a id="1045" class="Symbol">(</a><a id="1046" href="UTxO.Validity.html#1046" class="Bound">l</a> <a id="1048" class="Symbol">:</a> <a id="1050" href="UTxO.Ledger.html#949" class="Function">Ledger</a><a id="1056" class="Symbol">)</a> <a id="1058" class="Symbol">:</a> <a id="1060" class="PrimitiveType">Set</a> <a id="1064" class="Keyword">where</a>

  <a id="1073" class="Keyword">field</a>

    <a id="IsValidTx.validTxRefs"></a><a id="1084" href="UTxO.Validity.html#1084" class="Field">validTxRefs</a> <a id="1096" class="Symbol">:</a>
      <a id="1104" class="Symbol">∀</a> <a id="1106" href="UTxO.Validity.html#1106" class="Bound">i</a> <a id="1108" class="Symbol">→</a> <a id="1110" href="UTxO.Validity.html#1106" class="Bound">i</a> <a id="1112" href="Data.List.Membership.Setoid.html#877" class="Function Operator">∈</a> <a id="1114" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="1121" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="1124" class="Symbol">→</a>
        <a id="1134" href="Data.List.Relation.Unary.Any.html#1101" class="Datatype">Any</a> <a id="1138" class="Symbol">(λ</a> <a id="1141" href="UTxO.Validity.html#1141" class="Bound">t</a> <a id="1143" class="Symbol">→</a> <a id="1145" href="UTxO.Validity.html#1141" class="Bound">t</a> <a id="1147" href="UTxO.Hashing.Tx.html#769" class="Function Operator">♯ₜₓ</a> <a id="1151" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="1153" href="UTxO.Types.html#6630" class="Field">id</a> <a id="1156" class="Symbol">(</a><a id="1157" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="1167" href="UTxO.Validity.html#1106" class="Bound">i</a><a id="1168" class="Symbol">))</a> <a id="1171" href="UTxO.Validity.html#1046" class="Bound">l</a>

    <a id="IsValidTx.validOutputIndices"></a><a id="1178" href="UTxO.Validity.html#1178" class="Field">validOutputIndices</a> <a id="1197" class="Symbol">:</a>
      <a id="1205" class="Symbol">∀</a> <a id="1207" href="UTxO.Validity.html#1207" class="Bound">i</a> <a id="1209" class="Symbol">→</a> <a id="1211" class="Symbol">(</a><a id="1212" href="UTxO.Validity.html#1212" class="Bound">i∈</a> <a id="1215" class="Symbol">:</a> <a id="1217" href="UTxO.Validity.html#1207" class="Bound">i</a> <a id="1219" href="Data.List.Membership.Setoid.html#877" class="Function Operator">∈</a> <a id="1221" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="1228" href="UTxO.Validity.html#1036" class="Bound">tx</a><a id="1230" class="Symbol">)</a> <a id="1232" class="Symbol">→</a>
          <a id="1244" href="UTxO.Types.html#6649" class="Field">index</a> <a id="1250" class="Symbol">(</a><a id="1251" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="1261" href="UTxO.Validity.html#1207" class="Bound">i</a><a id="1262" class="Symbol">)</a> <a id="1264" href="Data.Nat.Base.html#1047" class="Function Operator">&lt;</a> <a id="1266" href="Data.List.Base.html#4183" class="Function">length</a> <a id="1273" class="Symbol">(</a><a id="1274" href="UTxO.Ledger.html#844" class="Field">outputs</a> <a id="1282" class="Symbol">(</a><a id="1283" href="UTxO.TxUtilities.html#2881" class="Function">lookupTx</a> <a id="1292" href="UTxO.Validity.html#1046" class="Bound">l</a> <a id="1294" class="Symbol">(</a><a id="1295" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="1305" href="UTxO.Validity.html#1207" class="Bound">i</a><a id="1306" class="Symbol">)</a> <a id="1308" class="Symbol">(</a><a id="1309" href="UTxO.Validity.html#1084" class="Field">validTxRefs</a> <a id="1321" href="UTxO.Validity.html#1207" class="Bound">i</a> <a id="1323" href="UTxO.Validity.html#1212" class="Bound">i∈</a><a id="1325" class="Symbol">)))</a>

    <a id="1334" class="Comment">-----------------------------------------------------------------------------------------</a>

    <a id="IsValidTx.validOutputRefs"></a><a id="1429" href="UTxO.Validity.html#1429" class="Field">validOutputRefs</a> <a id="1445" class="Symbol">:</a>
      <a id="1453" class="Symbol">∀</a> <a id="1455" href="UTxO.Validity.html#1455" class="Bound">i</a> <a id="1457" class="Symbol">→</a> <a id="1459" href="UTxO.Validity.html#1455" class="Bound">i</a> <a id="1461" href="Data.List.Membership.Setoid.html#877" class="Function Operator">∈</a> <a id="1463" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="1470" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="1473" class="Symbol">→</a>
        <a id="1483" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="1493" href="UTxO.Validity.html#1455" class="Bound">i</a> <a id="1495" href="Data.List.Membership.Setoid.html#877" class="Function Operator">∈</a> <a id="1497" href="Data.List.Base.html#1383" class="Function">map</a> <a id="1501" href="UTxO.TxUtilities.html#1410" class="Field">outRef</a> <a id="1508" class="Symbol">(</a><a id="1509" href="UTxO.TxUtilities.html#1494" class="Function">utxo</a> <a id="1514" href="UTxO.Validity.html#1046" class="Bound">l</a><a id="1515" class="Symbol">)</a>

    <a id="IsValidTx.preservesValues"></a><a id="1522" href="UTxO.Validity.html#1522" class="Field">preservesValues</a> <a id="1538" class="Symbol">:</a>
      <a id="1546" href="UTxO.Ledger.html#892" class="Field">forge</a> <a id="1552" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="1555" href="UTxO.Value.html#631" class="Function Operator">+ᶜ</a> <a id="1558" href="UTxO.Value.html#672" class="Function">sumᶜ</a> <a id="1563" class="Symbol">(</a><a id="1564" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWith∈</a> <a id="1573" class="Symbol">(</a><a id="1574" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="1581" href="UTxO.Validity.html#1036" class="Bound">tx</a><a id="1583" class="Symbol">)</a> <a id="1585" class="Symbol">λ</a> <a id="1587" class="Symbol">{</a><a id="1588" href="UTxO.Validity.html#1588" class="Bound">i</a><a id="1589" class="Symbol">}</a> <a id="1591" href="UTxO.Validity.html#1591" class="Bound">i∈</a> <a id="1594" class="Symbol">→</a>
                          <a id="1622" href="UTxO.TxUtilities.html#3355" class="Function">lookupValue</a> <a id="1634" href="UTxO.Validity.html#1046" class="Bound">l</a> <a id="1636" href="UTxO.Validity.html#1588" class="Bound">i</a> <a id="1638" class="Symbol">(</a><a id="1639" href="UTxO.Validity.html#1084" class="Field">validTxRefs</a> <a id="1651" href="UTxO.Validity.html#1588" class="Bound">i</a> <a id="1653" href="UTxO.Validity.html#1591" class="Bound">i∈</a><a id="1655" class="Symbol">)</a> <a id="1657" class="Symbol">(</a><a id="1658" href="UTxO.Validity.html#1178" class="Field">validOutputIndices</a> <a id="1677" href="UTxO.Validity.html#1588" class="Bound">i</a> <a id="1679" href="UTxO.Validity.html#1591" class="Bound">i∈</a><a id="1681" class="Symbol">))</a>
        <a id="1692" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a>
      <a id="1700" href="UTxO.Ledger.html#872" class="Field">fee</a> <a id="1704" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="1707" href="UTxO.Value.html#631" class="Function Operator">+ᶜ</a> <a id="1710" href="UTxO.Value.html#672" class="Function">sumᶜ</a> <a id="1715" class="Symbol">(</a><a id="1716" href="Data.List.Base.html#1383" class="Function">map</a> <a id="1720" href="UTxO.Ledger.html#703" class="Field">value</a> <a id="1726" class="Symbol">(</a><a id="1727" href="UTxO.Ledger.html#844" class="Field">outputs</a> <a id="1735" href="UTxO.Validity.html#1036" class="Bound">tx</a><a id="1737" class="Symbol">))</a>

    <a id="IsValidTx.noDoubleSpending"></a><a id="1745" href="UTxO.Validity.html#1745" class="Field">noDoubleSpending</a> <a id="1762" class="Symbol">:</a>
      <a id="1770" href="Data.List.Relation.Unary.AllPairs.Core.html#946" class="Datatype">Unique</a> <a id="1777" class="Symbol">(</a><a id="1778" href="Data.List.Base.html#1383" class="Function">map</a> <a id="1782" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="1792" class="Symbol">(</a><a id="1793" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="1800" href="UTxO.Validity.html#1036" class="Bound">tx</a><a id="1802" class="Symbol">))</a>

    <a id="IsValidTx.allInputsValidate"></a><a id="1810" href="UTxO.Validity.html#1810" class="Field">allInputsValidate</a> <a id="1828" class="Symbol">:</a>
      <a id="1836" class="Symbol">∀</a> <a id="1838" href="UTxO.Validity.html#1838" class="Bound">i</a> <a id="1840" class="Symbol">→</a> <a id="1842" class="Symbol">(</a><a id="1843" href="UTxO.Validity.html#1843" class="Bound">i∈</a> <a id="1846" class="Symbol">:</a> <a id="1848" href="UTxO.Validity.html#1838" class="Bound">i</a> <a id="1850" href="Data.List.Membership.Setoid.html#877" class="Function Operator">∈</a> <a id="1852" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="1859" href="UTxO.Validity.html#1036" class="Bound">tx</a><a id="1861" class="Symbol">)</a> <a id="1863" class="Symbol">→</a>
        <a id="1873" class="Keyword">let</a> <a id="1877" href="UTxO.Validity.html#1877" class="Bound">out</a> <a id="1881" class="Symbol">=</a> <a id="1883" href="UTxO.TxUtilities.html#3037" class="Function">lookupOutput</a> <a id="1896" href="UTxO.Validity.html#1046" class="Bound">l</a> <a id="1898" class="Symbol">(</a><a id="1899" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="1909" href="UTxO.Validity.html#1838" class="Bound">i</a><a id="1910" class="Symbol">)</a> <a id="1912" class="Symbol">(</a><a id="1913" href="UTxO.Validity.html#1084" class="Field">validTxRefs</a> <a id="1925" href="UTxO.Validity.html#1838" class="Bound">i</a> <a id="1927" href="UTxO.Validity.html#1843" class="Bound">i∈</a><a id="1929" class="Symbol">)</a> <a id="1931" class="Symbol">(</a><a id="1932" href="UTxO.Validity.html#1178" class="Field">validOutputIndices</a> <a id="1951" href="UTxO.Validity.html#1838" class="Bound">i</a> <a id="1953" href="UTxO.Validity.html#1843" class="Bound">i∈</a><a id="1955" class="Symbol">)</a>
            <a id="1969" href="UTxO.Validity.html#1969" class="Bound">ptx</a> <a id="1973" class="Symbol">=</a> <a id="1975" href="UTxO.TxUtilities.html#4624" class="Function">mkPendingTx</a> <a id="1987" href="UTxO.Validity.html#1046" class="Bound">l</a> <a id="1989" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="1992" href="UTxO.Validity.html#1838" class="Bound">i</a> <a id="1994" href="UTxO.Validity.html#1843" class="Bound">i∈</a> <a id="1997" href="UTxO.Validity.html#1084" class="Field">validTxRefs</a> <a id="2009" href="UTxO.Validity.html#1178" class="Field">validOutputIndices</a>
        <a id="2036" class="Keyword">in</a> <a id="2039" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2041" class="Symbol">(</a><a id="2042" href="UTxO.Ledger.html#980" class="Function">runValidation</a> <a id="2056" href="UTxO.Validity.html#1969" class="Bound">ptx</a> <a id="2060" href="UTxO.Validity.html#1838" class="Bound">i</a> <a id="2062" href="UTxO.Validity.html#1877" class="Bound">out</a><a id="2065" class="Symbol">)</a>

    <a id="IsValidTx.validateValidHashes"></a><a id="2072" href="UTxO.Validity.html#2072" class="Field">validateValidHashes</a> <a id="2092" class="Symbol">:</a>
      <a id="2100" class="Symbol">∀</a> <a id="2102" href="UTxO.Validity.html#2102" class="Bound">i</a> <a id="2104" class="Symbol">→</a> <a id="2106" class="Symbol">(</a><a id="2107" href="UTxO.Validity.html#2107" class="Bound">i∈</a> <a id="2110" class="Symbol">:</a> <a id="2112" href="UTxO.Validity.html#2102" class="Bound">i</a> <a id="2114" href="Data.List.Membership.Setoid.html#877" class="Function Operator">∈</a> <a id="2116" href="UTxO.Ledger.html#795" class="Field">inputs</a> <a id="2123" href="UTxO.Validity.html#1036" class="Bound">tx</a><a id="2125" class="Symbol">)</a> <a id="2127" class="Symbol">→</a>
        <a id="2137" class="Keyword">let</a> <a id="2141" href="UTxO.Validity.html#2141" class="Bound">out</a> <a id="2145" class="Symbol">=</a> <a id="2147" href="UTxO.TxUtilities.html#3037" class="Function">lookupOutput</a> <a id="2160" href="UTxO.Validity.html#1046" class="Bound">l</a> <a id="2162" class="Symbol">(</a><a id="2163" href="UTxO.Types.html#6952" class="Field">outputRef</a> <a id="2173" href="UTxO.Validity.html#2102" class="Bound">i</a><a id="2174" class="Symbol">)</a> <a id="2176" class="Symbol">(</a><a id="2177" href="UTxO.Validity.html#1084" class="Field">validTxRefs</a> <a id="2189" href="UTxO.Validity.html#2102" class="Bound">i</a> <a id="2191" href="UTxO.Validity.html#2107" class="Bound">i∈</a><a id="2193" class="Symbol">)</a> <a id="2195" class="Symbol">(</a><a id="2196" href="UTxO.Validity.html#1178" class="Field">validOutputIndices</a> <a id="2215" href="UTxO.Validity.html#2102" class="Bound">i</a> <a id="2217" href="UTxO.Validity.html#2107" class="Bound">i∈</a><a id="2219" class="Symbol">)</a>
        <a id="2229" class="Keyword">in</a> <a id="2232" class="Symbol">(</a><a id="2233" href="UTxO.Ledger.html#681" class="Field">address</a> <a id="2241" href="UTxO.Validity.html#2141" class="Bound">out</a><a id="2244" class="Symbol">)</a> <a id="2246" href="UTxO.Validity.html#775" class="Bound Operator">♯ₐ</a> <a id="2249" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="2251" class="Symbol">(</a><a id="2252" href="UTxO.Types.html#6980" class="Field">validator</a> <a id="2262" href="UTxO.Validity.html#2102" class="Bound">i</a><a id="2263" class="Symbol">)</a> <a id="2265" href="UTxO.Hashing.MetaHash.html#1197" class="Postulate Operator">♯</a>

    <a id="IsValidTx.validInterval"></a><a id="2272" href="UTxO.Validity.html#2272" class="Field">validInterval</a> <a id="2286" class="Symbol">:</a>
      <a id="2294" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2296" class="Symbol">(</a><a id="2297" href="UTxO.Ledger.html#912" class="Field">range</a> <a id="2303" href="UTxO.Validity.html#1036" class="Bound">tx</a> <a id="2306" href="UTxO.Types.html#4407" class="Function Operator">∋</a> <a id="2308" href="Data.List.Base.html#4183" class="Function">length</a> <a id="2315" href="UTxO.Validity.html#1046" class="Bound">l</a><a id="2316" class="Symbol">)</a>

<a id="2319" class="Keyword">open</a> <a id="2324" href="UTxO.Validity.html#1025" class="Module">IsValidTx</a> <a id="2334" class="Keyword">public</a>

<a id="2342" class="Comment">-- List notation for constructing valid ledgers.</a>
<a id="2391" class="Keyword">data</a> <a id="ValidLedger"></a><a id="2396" href="UTxO.Validity.html#2396" class="Datatype">ValidLedger</a> <a id="2408" class="Symbol">:</a> <a id="2410" href="UTxO.Ledger.html#949" class="Function">Ledger</a> <a id="2417" class="Symbol">→</a> <a id="2419" class="PrimitiveType">Set</a> <a id="2423" class="Keyword">where</a>

  <a id="ValidLedger.∙"></a><a id="2432" href="UTxO.Validity.html#2432" class="InductiveConstructor">∙</a> <a id="2434" class="Symbol">:</a> <a id="2436" href="UTxO.Validity.html#2396" class="Datatype">ValidLedger</a> <a id="2448" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>

  <a id="ValidLedger._⊕_∶-_"></a><a id="2454" href="UTxO.Validity.html#2454" class="InductiveConstructor Operator">_⊕_∶-_</a> <a id="2461" class="Symbol">:</a> <a id="2463" class="Symbol">∀</a> <a id="2465" class="Symbol">{</a><a id="2466" href="UTxO.Validity.html#2466" class="Bound">l</a><a id="2467" class="Symbol">}</a>
         <a id="2478" class="Symbol">→</a> <a id="2480" href="UTxO.Validity.html#2396" class="Datatype">ValidLedger</a> <a id="2492" href="UTxO.Validity.html#2466" class="Bound">l</a>
         <a id="2503" class="Symbol">→</a> <a id="2505" class="Symbol">(</a><a id="2506" href="UTxO.Validity.html#2506" class="Bound">t</a> <a id="2508" class="Symbol">:</a> <a id="2510" href="UTxO.Ledger.html#768" class="Record">Tx</a><a id="2512" class="Symbol">)</a>
         <a id="2523" class="Symbol">→</a> <a id="2525" href="UTxO.Validity.html#1025" class="Record">IsValidTx</a> <a id="2535" href="UTxO.Validity.html#2506" class="Bound">t</a> <a id="2537" href="UTxO.Validity.html#2466" class="Bound">l</a>
         <a id="2548" class="Symbol">→</a> <a id="2550" href="UTxO.Validity.html#2396" class="Datatype">ValidLedger</a> <a id="2562" class="Symbol">(</a><a id="2563" href="UTxO.Validity.html#2506" class="Bound">t</a> <a id="2565" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="2567" href="UTxO.Validity.html#2466" class="Bound">l</a><a id="2568" class="Symbol">)</a>

<a id="2571" class="Keyword">infixl</a> <a id="2578" class="Number">5</a> <a id="2580" href="UTxO.Validity.html#2454" class="InductiveConstructor Operator">_⊕_∶-_</a>
</pre></body></html>