<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO.Ledger</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Transactions and ledgers.</a>
<a id="103" class="Comment">------------------------------------------------------------------------</a>

<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="199" class="Keyword">using</a> <a id="205" class="Symbol">(</a><a id="206" href="Agda.Builtin.Bool.html#135" class="Datatype">Bool</a><a id="210" class="Symbol">)</a>
<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Data.List.html" class="Module">Data.List</a> <a id="234" class="Keyword">using</a> <a id="240" class="Symbol">(</a><a id="241" href="Agda.Builtin.List.html#121" class="Datatype">List</a><a id="245" class="Symbol">)</a>

<a id="248" class="Keyword">open</a> <a id="253" class="Keyword">import</a> <a id="260" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>                      <a id="298" class="Keyword">using</a> <a id="304" class="Symbol">(</a><a id="305" href="Relation.Nullary.html#1645">yes</a><a id="308" class="Symbol">;</a> <a id="310" href="Relation.Nullary.html#1682">no</a><a id="312" class="Symbol">)</a>
<a id="314" class="Keyword">open</a> <a id="319" class="Keyword">import</a> <a id="326" href="Relation.Binary.html" class="Module">Relation.Binary</a>                       <a id="364" class="Keyword">using</a> <a id="370" class="Symbol">(</a><a id="371" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a><a id="380" class="Symbol">)</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="432" class="Keyword">using</a> <a id="438" class="Symbol">(</a><a id="439" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="442" class="Symbol">;</a> <a id="444" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="448" class="Symbol">)</a>

<a id="451" class="Keyword">import</a> <a id="458" href="Prelude.Set%2527.html" class="Module">Prelude.Set&#39;</a> <a id="471" class="Symbol">as</a> <a id="474" class="Module">SET</a>

<a id="479" class="Keyword">open</a> <a id="484" class="Keyword">import</a> <a id="491" href="UTxO.Hashing.Base.html" class="Module">UTxO.Hashing.Base</a>
<a id="509" class="Keyword">open</a> <a id="514" class="Keyword">import</a> <a id="521" href="UTxO.Types.html" class="Module">UTxO.Types</a>

<a id="533" class="Keyword">module</a> <a id="540" href="UTxO.Ledger.html" class="Module">UTxO.Ledger</a>
  <a id="554" class="Symbol">(</a><a id="555" href="UTxO.Ledger.html#555" class="Bound">Address</a> <a id="563" class="Symbol">:</a> <a id="565" class="PrimitiveType">Set</a><a id="568" class="Symbol">)</a>
  <a id="572" class="Symbol">(</a><a id="573" href="UTxO.Ledger.html#573" class="Bound Operator">_♯ₐ</a> <a id="577" class="Symbol">:</a> <a id="579" href="UTxO.Hashing.Base.html#618" class="Function">Hash</a> <a id="584" href="UTxO.Ledger.html#555" class="Bound">Address</a><a id="591" class="Symbol">)</a>
  <a id="595" class="Symbol">(</a><a id="596" href="UTxO.Ledger.html#596" class="Bound Operator">_≟ₐ_</a> <a id="601" class="Symbol">:</a> <a id="603" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="613" class="Symbol">{</a><a id="614" class="Argument">A</a> <a id="616" class="Symbol">=</a> <a id="618" href="UTxO.Ledger.html#555" class="Bound">Address</a><a id="625" class="Symbol">}</a> <a id="627" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="630" class="Symbol">)</a>
  <a id="634" class="Keyword">where</a>

<a id="641" class="Keyword">record</a> <a id="TxOutput"></a><a id="648" href="UTxO.Ledger.html#648" class="Record">TxOutput</a> <a id="657" class="Symbol">:</a> <a id="659" class="PrimitiveType">Set</a> <a id="663" class="Keyword">where</a>
  <a id="671" class="Keyword">field</a>
    <a id="TxOutput.address"></a><a id="681" href="UTxO.Ledger.html#681" class="Field">address</a> <a id="689" class="Symbol">:</a> <a id="691" href="UTxO.Ledger.html#555" class="Bound">Address</a>
    <a id="TxOutput.value"></a><a id="703" href="UTxO.Ledger.html#703" class="Field">value</a>   <a id="711" class="Symbol">:</a> <a id="713" href="UTxO.Value.html#578" class="Function">Value</a>
    <a id="TxOutput.dataVal"></a><a id="723" href="UTxO.Ledger.html#723" class="Field">dataVal</a> <a id="731" class="Symbol">:</a> <a id="733" href="UTxO.Types.html#1736" class="Datatype">DATA</a>

<a id="739" class="Keyword">open</a> <a id="744" href="UTxO.Ledger.html#648" class="Module">TxOutput</a> <a id="753" class="Keyword">public</a>

<a id="761" class="Keyword">record</a> <a id="Tx"></a><a id="768" href="UTxO.Ledger.html#768" class="Record">Tx</a> <a id="771" class="Symbol">:</a> <a id="773" class="PrimitiveType">Set</a> <a id="777" class="Keyword">where</a>
  <a id="785" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="795" href="UTxO.Ledger.html#795" class="Field">inputs</a>  <a id="803" class="Symbol">:</a> <a id="805" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="810" href="UTxO.Types.html#6920" class="Record">TxInput</a> <a id="818" class="Comment">-- T0D0: Set⟨TxInput⟩</a>
    <a id="Tx.outputs"></a><a id="844" href="UTxO.Ledger.html#844" class="Field">outputs</a> <a id="852" class="Symbol">:</a> <a id="854" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="859" href="UTxO.Ledger.html#648" class="Record">TxOutput</a>
    <a id="Tx.fee"></a><a id="872" href="UTxO.Ledger.html#872" class="Field">fee</a>     <a id="880" class="Symbol">:</a> <a id="882" href="UTxO.Value.html#578" class="Function">Value</a>
    <a id="Tx.forge"></a><a id="892" href="UTxO.Ledger.html#892" class="Field">forge</a>   <a id="900" class="Symbol">:</a> <a id="902" href="UTxO.Value.html#578" class="Function">Value</a>
    <a id="Tx.range"></a><a id="912" href="UTxO.Ledger.html#912" class="Field">range</a>   <a id="920" class="Symbol">:</a> <a id="922" href="UTxO.Types.html#4237" class="Datatype">SlotRange</a>

<a id="933" class="Keyword">open</a> <a id="938" href="UTxO.Ledger.html#768" class="Module">Tx</a> <a id="941" class="Keyword">public</a>

<a id="Ledger"></a><a id="949" href="UTxO.Ledger.html#949" class="Function">Ledger</a> <a id="956" class="Symbol">:</a> <a id="958" class="PrimitiveType">Set</a>
<a id="962" href="UTxO.Ledger.html#949" class="Function">Ledger</a> <a id="969" class="Symbol">=</a> <a id="971" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="976" href="UTxO.Ledger.html#768" class="Record">Tx</a>

<a id="runValidation"></a><a id="980" href="UTxO.Ledger.html#980" class="Function">runValidation</a> <a id="994" class="Symbol">:</a> <a id="996" href="UTxO.Types.html#5130" class="Record">PendingTx</a> <a id="1006" class="Symbol">→</a> <a id="1008" class="Symbol">(</a><a id="1009" href="UTxO.Ledger.html#1009" class="Bound">i</a> <a id="1011" class="Symbol">:</a> <a id="1013" href="UTxO.Types.html#6920" class="Record">TxInput</a><a id="1020" class="Symbol">)</a> <a id="1022" class="Symbol">→</a> <a id="1024" class="Symbol">(</a><a id="1025" href="UTxO.Ledger.html#1025" class="Bound">o</a> <a id="1027" class="Symbol">:</a> <a id="1029" href="UTxO.Ledger.html#648" class="Record">TxOutput</a><a id="1037" class="Symbol">)</a> <a id="1039" class="Symbol">→</a> <a id="1041" href="Agda.Builtin.Bool.html#135" class="Datatype">Bool</a>
<a id="1046" href="UTxO.Ledger.html#980" class="Function">runValidation</a> <a id="1060" href="UTxO.Ledger.html#1060" class="Bound">ptx</a> <a id="1064" href="UTxO.Ledger.html#1064" class="Bound">i</a> <a id="1066" href="UTxO.Ledger.html#1066" class="Bound">o</a> <a id="1068" class="Symbol">=</a> <a id="1070" href="UTxO.Types.html#6980" class="Field">validator</a> <a id="1080" href="UTxO.Ledger.html#1064" class="Bound">i</a> <a id="1082" href="UTxO.Ledger.html#1060" class="Bound">ptx</a> <a id="1086" class="Symbol">(</a><a id="1087" href="UTxO.Types.html#7006" class="Field">redeemer</a> <a id="1096" href="UTxO.Ledger.html#1064" class="Bound">i</a><a id="1097" class="Symbol">)</a> <a id="1099" class="Symbol">(</a><a id="1100" href="UTxO.Ledger.html#723" class="Field">dataVal</a> <a id="1108" href="UTxO.Ledger.html#1066" class="Bound">o</a><a id="1109" class="Symbol">)</a>

<a id="1112" class="Comment">-- Sets of outputs</a>
<a id="_≟ᵒ_"></a><a id="1131" href="UTxO.Ledger.html#1131" class="Function Operator">_≟ᵒ_</a> <a id="1136" class="Symbol">:</a> <a id="1138" href="Relation.Binary.Definitions.html#4575" class="Function">Decidable</a> <a id="1148" class="Symbol">{</a><a id="1149" class="Argument">A</a> <a id="1151" class="Symbol">=</a> <a id="1153" href="UTxO.Ledger.html#648" class="Record">TxOutput</a><a id="1161" class="Symbol">}</a> <a id="1163" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a>
<a id="1167" href="UTxO.Ledger.html#1167" class="Bound">o</a> <a id="1169" href="UTxO.Ledger.html#1131" class="Function Operator">≟ᵒ</a> <a id="1172" href="UTxO.Ledger.html#1172" class="Bound">o′</a>
  <a id="1177" class="Keyword">with</a> <a id="1182" href="UTxO.Ledger.html#681" class="Field">address</a> <a id="1190" href="UTxO.Ledger.html#1167" class="Bound">o</a> <a id="1192" href="UTxO.Ledger.html#596" class="Bound Operator">≟ₐ</a> <a id="1195" href="UTxO.Ledger.html#681" class="Field">address</a> <a id="1203" href="UTxO.Ledger.html#1172" class="Bound">o′</a> <a id="1206" class="Symbol">|</a> <a id="1208" href="UTxO.Ledger.html#703" class="Field">value</a> <a id="1214" href="UTxO.Ledger.html#1167" class="Bound">o</a> <a id="1216" href="UTxO.Value.html#723" class="Function Operator">≟ᶜ</a> <a id="1219" href="UTxO.Ledger.html#703" class="Field">value</a> <a id="1225" href="UTxO.Ledger.html#1172" class="Bound">o′</a> <a id="1228" class="Symbol">|</a> <a id="1230" href="UTxO.Ledger.html#723" class="Field">dataVal</a> <a id="1238" href="UTxO.Ledger.html#1167" class="Bound">o</a> <a id="1240" href="UTxO.Types.html#7518" class="Function Operator">≟ᵈ</a> <a id="1243" href="UTxO.Ledger.html#723" class="Field">dataVal</a> <a id="1251" href="UTxO.Ledger.html#1172" class="Bound">o′</a>
<a id="1254" class="Symbol">...</a> <a id="1258" class="Symbol">|</a> <a id="1260" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="1263" href="UTxO.Ledger.html#1263" class="Bound">¬p</a>    <a id="1269" class="Symbol">|</a> <a id="1271" class="Symbol">_</a>        <a id="1280" class="Symbol">|</a> <a id="1282" class="Symbol">_</a>        <a id="1291" class="Symbol">=</a> <a id="1293" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="1296" class="Symbol">λ{</a> <a id="1299" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1304" class="Symbol">→</a> <a id="1306" href="UTxO.Ledger.html#1263" class="Bound">¬p</a> <a id="1309" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1314" class="Symbol">}</a>
<a id="1316" class="CatchallClause Symbol">...</a><a id="1319" class="CatchallClause"> </a><a id="1320" class="CatchallClause Symbol">|</a><a id="1321" class="CatchallClause"> </a><a id="1322" class="CatchallClause Symbol">_</a><a id="1323" class="CatchallClause">        </a><a id="1331" class="CatchallClause Symbol">|</a><a id="1332" class="CatchallClause"> </a><a id="1333" href="Relation.Nullary.html#1682" class="CatchallClause InductiveConstructor">no</a><a id="1335" class="CatchallClause"> </a><a id="1336" href="UTxO.Ledger.html#1336" class="CatchallClause Bound">¬p</a><a id="1338" class="CatchallClause">    </a><a id="1342" class="CatchallClause Symbol">|</a><a id="1343" class="CatchallClause"> </a><a id="1344" class="CatchallClause Symbol">_</a>        <a id="1353" class="Symbol">=</a> <a id="1355" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="1358" class="Symbol">λ{</a> <a id="1361" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1366" class="Symbol">→</a> <a id="1368" href="UTxO.Ledger.html#1336" class="Bound">¬p</a> <a id="1371" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1376" class="Symbol">}</a>
<a id="1378" class="CatchallClause Symbol">...</a><a id="1381" class="CatchallClause"> </a><a id="1382" class="CatchallClause Symbol">|</a><a id="1383" class="CatchallClause"> </a><a id="1384" class="CatchallClause Symbol">_</a><a id="1385" class="CatchallClause">        </a><a id="1393" class="CatchallClause Symbol">|</a><a id="1394" class="CatchallClause"> </a><a id="1395" class="CatchallClause Symbol">_</a><a id="1396" class="CatchallClause">        </a><a id="1404" class="CatchallClause Symbol">|</a><a id="1405" class="CatchallClause"> </a><a id="1406" href="Relation.Nullary.html#1682" class="CatchallClause InductiveConstructor">no</a><a id="1408" class="CatchallClause"> </a><a id="1409" href="UTxO.Ledger.html#1409" class="CatchallClause Bound">¬p</a>    <a id="1415" class="Symbol">=</a> <a id="1417" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="1420" class="Symbol">λ{</a> <a id="1423" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1428" class="Symbol">→</a> <a id="1430" href="UTxO.Ledger.html#1409" class="Bound">¬p</a> <a id="1433" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1438" class="Symbol">}</a>
<a id="1440" class="Symbol">...</a> <a id="1444" class="Symbol">|</a> <a id="1446" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="1450" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1455" class="Symbol">|</a> <a id="1457" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="1461" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1466" class="Symbol">|</a> <a id="1468" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="1472" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="1477" class="Symbol">=</a> <a id="1479" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="1483" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

<a id="1489" class="Keyword">module</a> <a id="SETᵒ"></a><a id="1496" href="UTxO.Ledger.html#1496" class="Module">SETᵒ</a> <a id="1501" class="Symbol">=</a> <a id="1503" href="Prelude.Set%2527.html" class="Module">SET</a> <a id="1507" class="Symbol">{</a><a id="1508" class="Argument">A</a> <a id="1510" class="Symbol">=</a> <a id="1512" href="UTxO.Ledger.html#648" class="Record">TxOutput</a><a id="1520" class="Symbol">}</a> <a id="1522" href="UTxO.Ledger.html#1131" class="Function Operator">_≟ᵒ_</a>
<a id="Set⟨TxOutput⟩"></a><a id="1527" href="UTxO.Ledger.html#1527" class="Function">Set⟨TxOutput⟩</a> <a id="1541" class="Symbol">=</a> <a id="1543" href="Prelude.Set%2527.html#3504" class="Record">Set&#39;</a> <a id="1548" class="Keyword">where</a> <a id="1554" class="Keyword">open</a> <a id="1559" href="UTxO.Ledger.html#1496" class="Module">SETᵒ</a>
</pre></body></html>